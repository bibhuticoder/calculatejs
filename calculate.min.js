!function(t){function p(){this.top=-1,this.MAX=100,this.data=[]}function o(t){return"+"===t||"-"===t||"*"===t||"/"===t||"%"===t||"$"===t}function n(t){return")"===t?"(":"}"===t?"{":"]"===t?"[":"("===t?")":"{"===t?"}":"["===t?"]":void 0}function s(t){var o=new p;for(i=0;i<t.length;i++)if(tmp=t[i],("("===tmp||"{"===tmp||"["===tmp)&&o.push(tmp),")"===tmp||"}"===tmp||"]"===tmp){if(o.onTop()!==n(tmp))return!1;o.pop()}return o.isEmpty()?!0:!1}function r(t){return t>="A"&&"Z">=t||t>="a"&&"z">=t||t>="0"&&"9">=t||!isNaN(t)}function u(t,p){return p?"("==t||"{"==t||"["==t||")"==t||"}"==t||"]"==t:"("==t||"{"==t||"["==t}function e(t){var p=["-","+","*","/","%","$"];return p.indexOf(t)}function h(t){var s=new p,h=new p,a=[],f="";for(i=0;i<t.length;i++){var l=t[i];if(u(l,!1))s.push(l);else if(r(l)){for(f+=l;r(t[++i])&&i!=t.length;)f+=t[i];l=f,h.push(l),f="",i--}else if(o(l))if(!s.isEmpty()||u(s.onTop(),!1))if(e(l)>e(s.onTop()))s.push(l);else{var c=s.pop();h.push(c),s.push(l)}else s.push(l);else if((")"===l||"}"===l||"]"===l)&&!s.isEmpty()){for(;s.onTop()!==n(l)&&!s.isEmpty();)h.push(s.pop());s.pop()}a.push(l+"  |  "+h.data+"  |  "+s.data)}for(;!s.isEmpty();)h.push(s.pop()),a.push("  |  "+h.data+"  |  "+s.data);return{"final":h.data,steps:a}}function a(t){var i,n=new p;for(tmp="",i=0;i<t.length;i++){var s=t[i];if(r(s))n.push(parseInt(s));else if(o(s)){var u=n.pop(),e=n.pop();"+"===s?n.push(e+u):"-"===s?n.push(e-u):"*"===s?n.push(u*e):"/"===s?n.push(e/u):"%"===s?n.push(e%u):"$"===s&&n.push(Math.pow(e,u))}}return n.pop()}p.prototype.push=function(t){this.isFull()?console.log("Error : Stack is full"):(this.top++,this.data.push(t))},p.prototype.pop=function(){if(!this.isEmpty()){var t=this.data[this.top];return this.data.splice(this.top--,1),t}console.log("Error : Stack is empty")},p.prototype.isEmpty=function(){return-1===this.top},p.prototype.isFull=function(){return this.top+1===this.MAX},p.prototype.onTop=function(){return this.data[this.top]},t.calculate=function(t){return s(t)?a(h(t)["final"]):"Syntax Error"}}(window);